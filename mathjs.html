<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathJS Playground</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/14.2.1/math.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">MathJS Playground</h1>
        
        <div class="bg-white rounded-lg shadow-md p-6 space-y-4">
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Input Expression</label>
                <textarea 
                    id="input" 
                    class="w-full h-32 p-3 border rounded-md font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Enter math expression (e.g., 2 + 3, sqrt(16), or eigs([[1,2],[3,4]]))"
                ></textarea>
            </div>
            
            <button 
                onclick="evaluateMath()"
                class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"
            >
                Run Code
            </button>
            
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Output</label>
                <div 
                    id="output" 
                    class="w-full h-20 p-3 bg-gray-50 border rounded-md font-mono text-sm overflow-auto"
                ></div>
            </div>
        </div>
    </div>

    <script>
 function evaluateMath() {
    try {
        const input = document.getElementById('input').value;
        const result = math.evaluate(input);

        let outputText;
        if (result?.values && result?.eigenvectors) {
            // Extract eigenvalues
            const values = math.format(result.values, { notation: 'fixed', precision: 8 });
            
            // Format eigenvectors properly
            const eigenvectors = result.eigenvectors.map(ev => {
                const vector = Array.isArray(ev.vector) 
                    ? ev.vector 
                    : ev.vector.toArray();
                return vector.map(n => math.format(n, { notation: 'fixed', precision: 8 }));
            });

            outputText = `Eigenvalues: ${values}\nEigenvectors:\n${eigenvectors.map(v => v.join(', ')).join('\n')}`;
        } else {
            outputText = math.format(result);
        }

        document.getElementById('output').innerHTML = 
            `<span class="text-gray-600">${input}</span>\n= ${outputText}`;
    } catch (error) {
        document.getElementById('output').innerHTML = 
            `<span class="text-red-600">Error: ${error.message}</span>`;
    }
}
</script>
</body>
</html>